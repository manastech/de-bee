{% extends "master.html" %}
{% block top %} 
	<div style="text-align: right"> 
	<font size="5">{{group.name}}</font><br>  
	(<a href="{{signout_url}}">sign out</a>)
	</div>
{% endblock %}
{% block navigation %}
	<div id="menuGroupsActive">
		
	</div>
	<div id="menuHome">
		<a href="/">
			<span/>
		</a>
	</div>
{% endblock %}
{% block content %}
		{{ message }}
		<div>
			<form action="/group" method="get">
				<select name="group">
					<option>-- select group --</option>
				{% for group in groups %}
				<option value="{{ group.key }}">{{ group.name }}</option>
				{% endfor %}
				</select>
				<input type="submit" value="Go to group page">
			</form>
		</div>
		
		<br/>
		
		<span id="groupHomeImage"><a href="javascript:showGroupTab('groupHome')" id="groupHomeImage">Balance & Actions</a></div>
		
		<span id="groupInviteImage"><a href="javascript:showGroupTab('groupInvite')" >Invite</a></div>
		
		<span id="groupHistoryImage"><a href="javascript:showGroupTab('groupHistory')" id="groupHistoryImage">History</a></div>
		
		{% if goToHistoryTab %}
		<div id="groupHome" style="display:none">
		{% else %}
		<div id="groupHome">
		{% endif %}
		
		<h3>Your balance</h3>
	
		{% if balanceIsZero %}
			You owe nobody, and nobody owes you. Hurray!
		{% else %}
			{% if balancePositive %}
				{% include "groupDetailPositive.html" %}
			{% else %}
				{% include "groupDetailNegative.html" %}
			{% endif %}
		{% endif %}
		
		<h3>Actions</h3>
	
		{% include "enterTransaction.html" %}
		
		<p>
		{% if balanceIsZero %}
			<form action="/groupUnsubscription" method="post">
				<input type="hidden" name="group" value="{{group.key}}" />
				<input type="submit" value="Unregister me!" />
			</form>
		{% else %}
			<small>To unsubscribe from this group you must first pay your debts.</small>
		{% endif %}
		</p>
		</div>
		
		<div id="groupInvite" style="display:none">
			<h3>Invite</h3>
			
			{% include "enterInvite.html" %}
		</div>
		
		{% if goToHistoryTab %}
		<div id="groupHistory">
		{% else %}
		<div id="groupHistory" style="display:none">
		{% endif %}
			<h3>Invite</h3>
			<h3>History</h3>
			
			{% include "transactionHistory.html" %}
		</div>
		
		<script>
		function showGroupTab(id) {
			document.getElementById("groupHome").style.display = "none";
			document.getElementById("groupInvite").style.display = "none";
			document.getElementById("groupHistory").style.display = "none";
			document.getElementById("groupHomeImage").class = "groupHomeImage";
			document.getElementById("groupInviteImage").style.display = "groupInviteImage";
			document.getElementById("groupHistoryImage").style.display = "groupHistoryImage";
			document.getElementById(id).style.display = "";
			document.getElementById(id + "Image").class = id + "ImageSelected";
			}
		</script>
		
{% endblock %}